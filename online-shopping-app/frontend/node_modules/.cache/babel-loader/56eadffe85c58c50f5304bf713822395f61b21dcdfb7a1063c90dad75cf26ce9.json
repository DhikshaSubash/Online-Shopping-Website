{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\online-shopping-app\\\\frontend\\\\src\\\\pages\\\\Cart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cart = () => {\n  _s();\n  const userEmail = localStorage.getItem('user');\n  const navigate = useNavigate();\n  const [cartItems, setCartItems] = useState([]);\n  const [msg, setMsg] = useState('');\n  useEffect(() => {\n    fetchCart();\n  }, []);\n  const fetchCart = async () => {\n    try {\n      const res = await axios.get(`http://localhost:5000/user/cart/${userEmail}`);\n      setCartItems(res.data);\n    } catch (err) {\n      setMsg('Failed to load cart');\n    }\n  };\n  const updateQuantity = async (product_id, quantity) => {\n    try {\n      const res = await axios.put('http://localhost:5000/user/update-cart', {\n        user_email: userEmail,\n        product_id,\n        quantity\n      });\n      setMsg(res.data.message);\n      fetchCart(); // refresh cart\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMsg(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Error updating cart');\n    }\n  };\n  const removeItem = async product_id => {\n    try {\n      await axios.post('http://localhost:5000/user/remove-from-cart', {\n        user_email: userEmail,\n        product_id\n      });\n      fetchCart();\n    } catch (err) {\n      setMsg('Error removing item');\n    }\n  };\n  const placeOrder = async () => {\n    try {\n      const res = await axios.post('http://localhost:5000/user/place-order', {\n        user_email: userEmail\n      });\n      setMsg(res.data.message);\n      setTimeout(() => navigate('/order'), 1500); // redirect after order\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setMsg(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Order failed');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Cart is empty\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.card,\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Price: \\u20B9\", item.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"In Stock: \", item.stock]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Current Quantity: \", item.quantity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"1\",\n          placeholder: \"Update Quantity\",\n          onChange: e => updateQuantity(item.product_id, parseInt(e.target.value))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeItem(item.product_id),\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this)]\n      }, item.product_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: placeOrder,\n        style: {\n          marginTop: 20\n        },\n        children: \"Place Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(Cart, \"atCxXCL/KsDNndRaI34AW26d+Do=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nconst styles = {\n  container: {\n    padding: 20,\n    textAlign: 'center'\n  },\n  card: {\n    border: '1px solid #ccc',\n    margin: '10px auto',\n    padding: 15,\n    maxWidth: 400,\n    borderRadius: 10\n  }\n};\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsxDEV","_jsxDEV","Cart","_s","userEmail","localStorage","getItem","navigate","cartItems","setCartItems","msg","setMsg","fetchCart","res","get","data","err","updateQuantity","product_id","quantity","put","user_email","message","_err$response","_err$response$data","response","error","removeItem","post","placeOrder","setTimeout","_err$response2","_err$response2$data","style","styles","container","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","card","name","price","stock","type","min","placeholder","onChange","e","parseInt","target","value","onClick","marginTop","color","_c","padding","textAlign","border","margin","maxWidth","borderRadius","$RefreshReg$"],"sources":["C:/Users/ASUS/Documents/online-shopping-app/frontend/src/pages/Cart.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Cart = () => {\r\n  const userEmail = localStorage.getItem('user');\r\n  const navigate = useNavigate();\r\n\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [msg, setMsg] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const fetchCart = async () => {\r\n    try {\r\n      const res = await axios.get(`http://localhost:5000/user/cart/${userEmail}`);\r\n      setCartItems(res.data);\r\n    } catch (err) {\r\n      setMsg('Failed to load cart');\r\n    }\r\n  };\r\n\r\n  const updateQuantity = async (product_id, quantity) => {\r\n    try {\r\n      const res = await axios.put('http://localhost:5000/user/update-cart', {\r\n        user_email: userEmail,\r\n        product_id,\r\n        quantity\r\n      });\r\n      setMsg(res.data.message);\r\n      fetchCart(); // refresh cart\r\n    } catch (err) {\r\n      setMsg(err.response?.data?.error || 'Error updating cart');\r\n    }\r\n  };\r\n\r\n  const removeItem = async (product_id) => {\r\n    try {\r\n      await axios.post('http://localhost:5000/user/remove-from-cart', {\r\n        user_email: userEmail,\r\n        product_id\r\n      });\r\n      fetchCart();\r\n    } catch (err) {\r\n      setMsg('Error removing item');\r\n    }\r\n  };\r\n\r\n  const placeOrder = async () => {\r\n    try {\r\n      const res = await axios.post('http://localhost:5000/user/place-order', {\r\n        user_email: userEmail\r\n      });\r\n      setMsg(res.data.message);\r\n      setTimeout(() => navigate('/order'), 1500); // redirect after order\r\n    } catch (err) {\r\n      setMsg(err.response?.data?.error || 'Order failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h2>Your Cart</h2>\r\n\r\n      {cartItems.length === 0 ? (\r\n        <p>Cart is empty</p>\r\n      ) : (\r\n        <div>\r\n          {cartItems.map((item) => (\r\n            <div key={item.product_id} style={styles.card}>\r\n              <h4>{item.name}</h4>\r\n              <p>Price: â‚¹{item.price}</p>\r\n              <p>In Stock: {item.stock}</p>\r\n              <p>Current Quantity: {item.quantity}</p>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                placeholder=\"Update Quantity\"\r\n                onChange={(e) => updateQuantity(item.product_id, parseInt(e.target.value))}\r\n              />\r\n              <button onClick={() => removeItem(item.product_id)}>Remove</button>\r\n            </div>\r\n          ))}\r\n          <button onClick={placeOrder} style={{ marginTop: 20 }}>Place Order</button>\r\n        </div>\r\n      )}\r\n      <p style={{ color: 'green' }}>{msg}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: { padding: 20, textAlign: 'center' },\r\n  card: {\r\n    border: '1px solid #ccc',\r\n    margin: '10px auto',\r\n    padding: 15,\r\n    maxWidth: 400,\r\n    borderRadius: 10\r\n  }\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}